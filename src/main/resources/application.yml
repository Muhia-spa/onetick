spring:
  application:
    name: onetick
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/onetick}
    username: ${DB_USERNAME:onetick}
    password: ${DB_PASSWORD:onetick}
    hikari:
      maximum-pool-size: ${DB_POOL_MAX_SIZE:30}
      minimum-idle: ${DB_POOL_MIN_IDLE:5}
      connection-timeout: ${DB_POOL_CONNECTION_TIMEOUT_MS:30000}
      idle-timeout: ${DB_POOL_IDLE_TIMEOUT_MS:600000}
      max-lifetime: ${DB_POOL_MAX_LIFETIME_MS:1800000}
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
  flyway:
    enabled: true
    locations: classpath:db/migration
  mail:
    host: ${MAIL_HOST:smtp.example.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:user@example.com}
    password: ${MAIL_PASSWORD:change-me}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

server:
  port: ${SERVER_PORT:8080}
  shutdown: graceful

app:
  reminders:
    hours-before-deadline: ${APP_REMINDER_HOURS_BEFORE_DEADLINE:24}
    cron: ${APP_REMINDER_CRON:0 0 * * * *}
  jwt:
    secret: ${APP_JWT_SECRET:change-this-to-a-strong-secret-with-64-chars-minimum}
    expiration-minutes: ${APP_JWT_EXPIRATION_MINUTES:60}
  bootstrap:
    admin:
      enabled: ${APP_BOOTSTRAP_ADMIN_ENABLED:true}
      email: ${APP_BOOTSTRAP_ADMIN_EMAIL:admin@onetick.local}
      name: ${APP_BOOTSTRAP_ADMIN_NAME:Onetick Admin}
      password: ${APP_BOOTSTRAP_ADMIN_PASSWORD:admin12345}

logging:
  pattern:
    console: "%d{yyyy-MM-dd'T'HH:mm:ss.SSSX} %-5level [%X{correlationId}] %logger{36} - %msg%n"
  level:
    root: ${LOG_LEVEL_ROOT:INFO}

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      probes:
        enabled: true
      show-details: never
  health:
    mail:
      enabled: ${MANAGEMENT_HEALTH_MAIL_ENABLED:false}
